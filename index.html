<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cyber Nitro Racing</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:Arial;
    text-align:center;
    color:#00ffff;
}

h1{
    text-shadow:0 0 10px #00ffff;
}

#gameArea{
    width:360px;
    height:650px;
    margin:10px auto;
    position:relative;
    overflow:hidden;
    background:linear-gradient(to bottom,#111,#000);
    border:3px solid #00ffff;
    box-shadow:0 0 20px #00ffff;
}

.lane{
    position:absolute;
    width:2px;
    height:650px;
    background:#00ffff33;
}

.car{
    width:60px;
    height:100px;
    position:absolute;
    bottom:20px;
    left:150px;
    background:linear-gradient(red,orange);
    border-radius:10px;
    box-shadow:0 0 15px red;
}

.enemy{
    width:60px;
    height:100px;
    position:absolute;
    background:linear-gradient(yellow,orange);
    border-radius:10px;
    box-shadow:0 0 15px yellow;
}

button{
    padding:8px 15px;
    margin:5px;
    cursor:pointer;
}

#info{
    font-size:18px;
}
</style>
</head>
<body>

<h1>ðŸš— CYBER NITRO RACING</h1>
<div id="info">
Score: <span id="score">0</span> |
High Score: <span id="highScore">0</span>
</div>

<button onclick="startGame()">Start</button>
<button onclick="togglePause()">Pause</button>
<button onclick="activateNitro()">Nitro âš¡</button>

<div id="gameArea">
<div class="lane" style="left:120px"></div>
<div class="lane" style="left:240px"></div>
</div>

<audio id="bgMusic" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
</audio>

<script>
const gameArea=document.getElementById("gameArea");
const scoreDisplay=document.getElementById("score");
const highScoreDisplay=document.getElementById("highScore");
const bgMusic=document.getElementById("bgMusic");

let player={lane:1,speed:6,score:0};
let lanes=[30,150,270];
let animation;
let paused=false;
let nitroActive=false;

let highScore=localStorage.getItem("cyberHighScore") || 0;
highScoreDisplay.innerText=highScore;

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowLeft" && player.lane>0) player.lane--;
    if(e.key==="ArrowRight" && player.lane<2) player.lane++;
});

function startGame(){
    gameArea.querySelectorAll(".enemy,.car").forEach(e=>e.remove());

    player.score=0;
    player.speed=6;
    player.lane=1;

    let car=document.createElement("div");
    car.classList.add("car");
    gameArea.appendChild(car);

    for(let i=0;i<3;i++){
        createEnemy();
    }

    bgMusic.play();
    paused=false;
    animation=requestAnimationFrame(playGame);
}

function createEnemy(){
    let enemy=document.createElement("div");
    enemy.classList.add("enemy");
    enemy.style.top="-120px";
    enemy.dataset.lane=Math.floor(Math.random()*3);
    enemy.style.left=lanes[enemy.dataset.lane]+"px";
    gameArea.appendChild(enemy);
}

function playGame(){
    if(paused) return;

    let car=document.querySelector(".car");
    car.style.left=lanes[player.lane]+"px";

    document.querySelectorAll(".enemy").forEach(enemy=>{
        let top=enemy.offsetTop;
        if(top>650){
            enemy.remove();
            createEnemy();
        }
        enemy.style.top=(top+player.speed)+"px";

        if(isCollide(car,enemy)){
            endGame();
        }
    });

    player.score++;
    player.speed=6+Math.floor(player.score/500);
    scoreDisplay.innerText=player.score;

    animation=requestAnimationFrame(playGame);
}

function isCollide(a,b){
    let aRect=a.getBoundingClientRect();
    let bRect=b.getBoundingClientRect();
    return !(aRect.bottom<bRect.top ||
             aRect.top>bRect.bottom ||
             aRect.right<bRect.left ||
             aRect.left>bRect.right);
}

function activateNitro(){
    if(nitroActive) return;
    nitroActive=true;
    player.speed+=5;
    setTimeout(()=>{
        player.speed-=5;
        nitroActive=false;
    },3000);
}

function togglePause(){
    paused=!paused;
    if(!paused) animation=requestAnimationFrame(playGame);
}

function endGame(){
    cancelAnimationFrame(animation);
    bgMusic.pause();
    if(player.score>highScore){
        localStorage.setItem("cyberHighScore",player.score);
        highScore=player.score;
    }
    highScoreDisplay.innerText=highScore;
    alert("ðŸ’¥ Game Over! Score: "+player.score);
}
</script>

</body>
</html>
